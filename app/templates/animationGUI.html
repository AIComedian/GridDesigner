<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>GridDesigner â€” Launch GUI</title>
    <style>
      body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; margin: 32px; }
      button { padding: 8px 12px; font-size: 14px; }
      #status { margin-top: 12px; }
    </style>
  </head>
  <body>
    <h1>Animation GUI Launcher</h1>

    <p>
      Use the button below to start the desktop Tkinter GUI. If the GUI is already running you'll see its status.
    </p>

    <button id="launchBtn">Start / Open GUI</button>
    <button id="refreshBtn">Refresh Status</button>

    <div id="status">
      Status: <span id="running">unknown</span>
      <br/>PID: <span id="pid">-</span>
    </div>

    <script>
      async function refreshStatus() {
        try {
          const res = await fetch("/status");
          const data = await res.json();
          document.getElementById("running").textContent = data.running ? "running" : "stopped";
          document.getElementById("pid").textContent = data.pid || "-";
        } catch (err) {
          document.getElementById("running").textContent = "error";
          document.getElementById("pid").textContent = "-";
          console.error(err);
        }
      }

      document.getElementById("launchBtn").addEventListener("click", async function () {
        try {
          // POST to /launch (we use a fetch so the page does not redirect)
          await fetch("/launch", { method: "POST" });
          // give the process a moment to start, then refresh status
          setTimeout(refreshStatus, 400);
        } catch (err) {
          console.error(err);
          alert("Failed to request launch. See console.");
        }
      });

      document.getElementById("refreshBtn").addEventListener("click", refreshStatus);

      // initial status
      refreshStatus();
    </script>
  </body>
</html>